!function(e){function t(t){for(var a,o,s=t[0],c=t[1],l=t[2],m=0,d=[];m<s.length;m++)o=s[m],i[o]&&d.push(i[o][0]),i[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);for(u&&u(t);d.length;)d.shift()();return n.push.apply(n,l||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],a=!0,s=1;s<r.length;s++){var c=r[s];0!==i[c]&&(a=!1)}a&&(n.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},i={1:0},n=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;n.push([24,0]),r()}([,,,function(e,t,r){"use strict";t.a={setMuteVideoTracks:function(e,t){e.getVideoTracks().forEach(e=>e.enabled=!t)},setMuteAudioTracks:function(e,t){e.getAudioTracks().forEach(e=>e.enabled=!t)},setMuteTrack:function(e,t){e.enabled=!t},stopStream:function(e){e.getTracks().forEach(e=>e.stop())},getUserPermission:function(){return navigator.mediaDevices.getUserMedia({video:!0,audio:!0})},getUserDevices:async function(){const e={video:[],audio:[]},t=await navigator.mediaDevices.enumerateDevices();for(const r of t)"videoinput"===r.kind&&e.video.push(r),"audioinput"===r.kind&&e.audio.push(r);return e},getUserMedia:function({videoDeviceId:e,audioDeviceId:t},r){const a={video:{deviceId:{exact:e}},audio:{deviceId:{exact:t}}};return""===e&&(a.video=!1),""===t&&(a.audio=!1),["user","environment"].includes(r)&&(a.video.facingMode=r),navigator.mediaDevices.getUserMedia(a)},isGetDisplayMediaAvailable:function(){return"function"==typeof navigator.mediaDevices.getDisplayMedia},getDisplayStreamTrack:function(){return navigator.mediaDevices.getDisplayMedia({video:!0}).then(e=>e.getTracks()[0])},snapVideoStream:function(e,t="image/jpeg",r=1){return new Promise(async(a,i)=>{let n=document.createElement("video");n.muted=n.playsInline=!0,n.srcObject=e,await n.play().catch(i);let o=document.createElement("canvas");o.width=n.videoWidth,o.height=n.videoHeight,o.getContext("2d").drawImage(n,0,0),o.toBlob(e=>{n.pause(),n.srcObject=null,n=o=null,a(e)},t,r)})},getFakeStream:function(e){const t=document.createElement("canvas");t.width=t.height=1,t.getContext("2d");const r=t.captureStream(),a=e.createMediaStreamDestination().stream,[i]=r.getVideoTracks(),[n]=a.getAudioTracks();return new MediaStream([i,n])}}},function(e,t,r){"use strict";let a=null;t.a={getOsName:function(e){switch(!0){case/Android/.test(e):return"Android";case/iPhone|iPad|iPod/.test(e):return"iOS";case/Windows/.test(e):return"Windows";case/Mac OS X/.test(e):return"Mac";case/Linux/.test(e):return"Linux";case/CrOS/.test(e):return"CromeOS";case/Firefox/.test(e):return"FirefoxOS";default:return""}},getBrowserName:function(e){switch(!0){case/CriOS/.test(e):return"iOSChrome";case/Edge/.test(e):return"Edge";case/Chrome/.test(e):return"Chrome";case/Firefox/.test(e):return"Firefox";case/MSIE|Trident/.test(e):return"IE";case/Safari\//.test(e):return"Safari";case/AppleWebKit/.test(e):return"Webkit";default:return""}},getAudioCtx:function(e){if(null!==a)return a;const t=new(e.webkitAudioContext||e.AudioContext);return a=t},setLocationHref:function(e){location.href=e}}},function(e,t,r){"use strict";var a=r(0),i=r.n(a);t.a=(({isMuted:e=!1,isSelf:t=!1})=>i.a.createElement("i",{className:`material-icons ${t&&e?"-muted":""}`},e?"videocam_off":"videocam"))},function(e,t,r){"use strict";var a=r(0),i=r.n(a);t.a=(({isMuted:e=!1,isSelf:t=!1})=>i.a.createElement("i",{className:`material-icons ${t&&e?"-muted":""}`},e?"mic_off":"mic"))},,function(e,t,r){"use strict";t.a={isValidRoomType:function(e){return"sfu"===e||"mesh"===e},isValidRoomName:function(e){return/^[0-9a-z_-]{4,32}$/.test(e)}}},function(e,t,r){"use strict";var a=r(0),i=r.n(a);t.a=(({isSpeaking:e=!1})=>i.a.createElement("i",{className:`material-icons ${e?"-speaking":"-not_speaking"}`},"equalizer"))},function(e,t,r){"use strict";t.a=class{constructor(e){this.store=e}$update(e,t){const[r,a]=e.split(".");if(!(r&&a&&r in this.store&&a in this.store[r]))throw new Error(`${r}.${a} is not defined!`);this.store[r][a]=t}}},function(e,t,r){"use strict";const a=window.Peer,i=window.ScreenShare;t.a={initPeer:function(){return new Promise((e,t)=>{const r=new a({key:"03ff6219-b58f-4310-9484-e9108e859cdd",debug:2});r.once("open",()=>{e(r),r.removeListener("error",t)}),r.once("error",t)})},isScreenShareAvailable:function(){return i.create().isScreenShareAvailable()},getScreenStreamTrack:function(e){return new Promise((t,r)=>{i.create().start(e).then(e=>t(e.getTracks()[0])).catch(r)})}}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";(function(e){
/** @license React v0.13.6
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
Object.defineProperty(t,"__esModule",{value:!0});var r=null,a=!1,i=3,n=-1,o=-1,s=!1,c=!1;function l(){if(!s){var e=r.expirationTime;c?_():c=!0,w(d,e)}}function u(){var e=r,t=r.next;if(r===t)r=null;else{var a=r.previous;r=a.next=t,t.previous=a}e.next=e.previous=null,a=e.callback,t=e.expirationTime,e=e.priorityLevel;var n=i,s=o;i=e,o=t;try{var c=a()}finally{i=n,o=s}if("function"==typeof c)if(c={callback:c,priorityLevel:e,expirationTime:t,next:null,previous:null},null===r)r=c.next=c.previous=c;else{a=null,e=r;do{if(e.expirationTime>=t){a=e;break}e=e.next}while(e!==r);null===a?a=r:a===r&&(r=c,l()),(t=a.previous).next=a.previous=c,c.next=a,c.previous=t}}function m(){if(-1===n&&null!==r&&1===r.priorityLevel){s=!0;try{do{u()}while(null!==r&&1===r.priorityLevel)}finally{s=!1,null!==r?l():c=!1}}}function d(e){s=!0;var i=a;a=e;try{if(e)for(;null!==r;){var n=t.unstable_now();if(!(r.expirationTime<=n))break;do{u()}while(null!==r&&r.expirationTime<=n)}else if(null!==r)do{u()}while(null!==r&&!k())}finally{s=!1,a=i,null!==r?l():c=!1,m()}}var h,p,f=Date,v="function"==typeof setTimeout?setTimeout:void 0,S="function"==typeof clearTimeout?clearTimeout:void 0,g="function"==typeof requestAnimationFrame?requestAnimationFrame:void 0,b="function"==typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function y(e){h=g(function(t){S(p),e(t)}),p=v(function(){b(h),e(t.unstable_now())},100)}if("object"==typeof performance&&"function"==typeof performance.now){var E=performance;t.unstable_now=function(){return E.now()}}else t.unstable_now=function(){return f.now()};var w,_,k,N=null;if("undefined"!=typeof window?N=window:void 0!==e&&(N=e),N&&N._schedMock){var M=N._schedMock;w=M[0],_=M[1],k=M[2],t.unstable_now=M[3]}else if("undefined"==typeof window||"function"!=typeof MessageChannel){var T=null,O=function(e){if(null!==T)try{T(e)}finally{T=null}};w=function(e){null!==T?setTimeout(w,0,e):(T=e,setTimeout(O,0,!1))},_=function(){T=null},k=function(){return!1}}else{"undefined"!=typeof console&&("function"!=typeof g&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof b&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var C=null,x=!1,I=-1,D=!1,L=!1,A=0,j=33,V=33;k=function(){return A<=t.unstable_now()};var P=new MessageChannel,R=P.port2;P.port1.onmessage=function(){x=!1;var e=C,r=I;C=null,I=-1;var a=t.unstable_now(),i=!1;if(0>=A-a){if(!(-1!==r&&r<=a))return D||(D=!0,y($)),C=e,void(I=r);i=!0}if(null!==e){L=!0;try{e(i)}finally{L=!1}}};var $=function(e){if(null!==C){y($);var t=e-A+V;t<V&&j<V?(8>t&&(t=8),V=t<j?j:t):j=t,A=e+V,x||(x=!0,R.postMessage(void 0))}else D=!1};w=function(e,t){C=e,I=t,L||0>t?R.postMessage(void 0):D||(D=!0,y($))},_=function(){C=null,x=!1,I=-1}}t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,r){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var a=i,o=n;i=e,n=t.unstable_now();try{return r()}finally{i=a,n=o,m()}},t.unstable_next=function(e){switch(i){case 1:case 2:case 3:var r=3;break;default:r=i}var a=i,o=n;i=r,n=t.unstable_now();try{return e()}finally{i=a,n=o,m()}},t.unstable_scheduleCallback=function(e,a){var o=-1!==n?n:t.unstable_now();if("object"==typeof a&&null!==a&&"number"==typeof a.timeout)a=o+a.timeout;else switch(i){case 1:a=o+-1;break;case 2:a=o+250;break;case 5:a=o+1073741823;break;case 4:a=o+1e4;break;default:a=o+5e3}if(e={callback:e,priorityLevel:i,expirationTime:a,next:null,previous:null},null===r)r=e.next=e.previous=e,l();else{o=null;var s=r;do{if(s.expirationTime>a){o=s;break}s=s.next}while(s!==r);null===o?o=r:o===r&&(r=e,l()),(a=o.previous).next=o.previous=e,e.next=o,e.previous=a}return e},t.unstable_cancelCallback=function(e){var t=e.next;if(null!==t){if(t===e)r=null;else{e===r&&(r=t);var a=e.previous;a.next=t,t.previous=a}e.next=e.previous=null}},t.unstable_wrapCallback=function(e){var r=i;return function(){var a=i,o=n;i=r,n=t.unstable_now();try{return e.apply(this,arguments)}finally{i=a,n=o,m()}}},t.unstable_getCurrentPriorityLevel=function(){return i},t.unstable_shouldYield=function(){return!a&&(null!==r&&r.expirationTime<o||k())},t.unstable_continueExecution=function(){null!==r&&l()},t.unstable_pauseExecution=function(){},t.unstable_getFirstCallbackNode=function(){return r}}).call(this,r(12))},function(e,t,r){"use strict";var a=r(18);e.exports=function(e,t,r){r=r||{};var i={fftSize:1024,bufferLen:1024,smoothingTimeConstant:.2,minCaptureFreq:85,maxCaptureFreq:255,noiseCaptureDuration:1e3,minNoiseLevel:.3,maxNoiseLevel:.7,avgNoiseMultiplier:1.2,onVoiceStart:function(){},onVoiceStop:function(){},onUpdate:function(e){}},n={};for(var o in i)n[o]=r.hasOwnProperty(o)?r[o]:i[o];var s=0,c=1,l=0,u=0,m=60,d=5,h=[],p=!0,f=void 0,v=!1,S=null,g=e.createMediaStreamSource(t),b=e.createAnalyser();b.smoothingTimeConstant=n.smoothingTimeConstant,b.fftSize=n.fftSize;var y=e.createScriptProcessor(n.bufferLen,1,1);function E(){g.connect(b),b.connect(y),y.connect(e.destination)}function w(){y.disconnect(),b.disconnect(),g.disconnect()}return E(),y.onaudioprocess=function(){var e=new Uint8Array(b.frequencyBinCount);b.getByteFrequencyData(e);var t=a(b,e,n.minCaptureFreq,n.maxCaptureFreq);if(p)return void h.push(t);t>=s&&l<m?l++:t<s&&l>u&&l--;f!==(v=l>d)&&(v?n.onVoiceStart():n.onVoiceStop(),f=v);n.onUpdate(Math.max(0,t-s)/c)},p&&(S=setTimeout(function(){p=!1;var e=(h=h.filter(function(e){return e}).sort()).length?h.reduce(function(e,t){return Math.min(e,t)},1):n.minNoiseLevel||.1;s=e*n.avgNoiseMultiplier,n.minNoiseLevel&&s<n.minNoiseLevel&&(s=n.minNoiseLevel);n.maxNoiseLevel&&s>n.maxNoiseLevel&&(s=n.maxNoiseLevel);c=1-s},n.noiseCaptureDuration)),{connect:E,disconnect:w,destroy:function(){S&&clearTimeout(S),w(),y.onaudioprocess=null}}}},function(e,t,r){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var a=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(e){a[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,o,s=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var l in r=Object(arguments[c]))i.call(r,l)&&(s[l]=r[l]);if(a){o=a(r);for(var u=0;u<o.length;u++)n.call(r,o[u])&&(s[o[u]]=r[o[u]])}}return s}},function(e,t,r){"use strict";e.exports=r(13)},function(e,t){var r,a,i=e.exports={};function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===n||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:n}catch(e){r=n}try{a="function"==typeof clearTimeout?clearTimeout:o}catch(e){a=o}}();var c,l=[],u=!1,m=-1;function d(){u&&c&&(u=!1,c.length?l=c.concat(l):m=-1,l.length&&h())}function h(){if(!u){var e=s(d);u=!0;for(var t=l.length;t;){for(c=l,l=[];++m<t;)c&&c[m].run();m=-1,t=l.length}c=null,u=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===o||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function f(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new p(e,t)),1!==l.length||u||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=f,i.addListener=f,i.once=f,i.off=f,i.removeListener=f,i.removeAllListeners=f,i.emit=f,i.prependListener=f,i.prependOnceListener=f,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,r){var a=r(19);function i(e,t,r,i,n){for(var o=t.context.sampleRate,s=t.frequencyBinCount,c=a(i,o,s),l=a(n,o,s),u=l-c,m=0;c<l;c++)m+=r[c]/e;return 0===u?0:m/u}e.exports=i.bind(null,255),e.exports.floatData=i.bind(null,1)},function(e,t,r){var a=r(20);e.exports=function(e,t,r){var i=t/2,n=Math.round(e/i*r);return a(n,0,r)}},function(e,t){e.exports=function(e,t,r){return t<r?e<t?t:e>r?r:e:e<r?r:e>t?t:e}},function(e,t,r){var a;!function(i,n,o){if(i){for(var s,c={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},l={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},u={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},m={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},d=1;d<20;++d)c[111+d]="f"+d;for(d=0;d<=9;++d)c[d+96]=d.toString();g.prototype.bind=function(e,t,r){return e=e instanceof Array?e:[e],this._bindMultiple.call(this,e,t,r),this},g.prototype.unbind=function(e,t){return this.bind.call(this,e,function(){},t)},g.prototype.trigger=function(e,t){return this._directMap[e+":"+t]&&this._directMap[e+":"+t]({},e),this},g.prototype.reset=function(){return this._callbacks={},this._directMap={},this},g.prototype.stopCallback=function(e,t){if((" "+t.className+" ").indexOf(" mousetrap ")>-1)return!1;if(function e(t,r){return null!==t&&t!==n&&(t===r||e(t.parentNode,r))}(t,this.target))return!1;if("composedPath"in e&&"function"==typeof e.composedPath){var r=e.composedPath()[0];r!==e.target&&(t=r)}return"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable},g.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},g.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(c[t]=e[t]);s=null},g.init=function(){var e=g(n);for(var t in e)"_"!==t.charAt(0)&&(g[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},g.init(),i.Mousetrap=g,e.exports&&(e.exports=g),void 0===(a=function(){return g}.call(t,r,t,e))||(e.exports=a)}function h(e,t,r){e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent("on"+t,r)}function p(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return c[e.which]?c[e.which]:l[e.which]?l[e.which]:String.fromCharCode(e.which).toLowerCase()}function f(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function v(e,t,r){return r||(r=function(){if(!s)for(var e in s={},c)e>95&&e<112||c.hasOwnProperty(e)&&(s[c[e]]=e);return s}()[e]?"keydown":"keypress"),"keypress"==r&&t.length&&(r="keydown"),r}function S(e,t){var r,a,i,n=[];for(r=function(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus")).split("+")}(e),i=0;i<r.length;++i)a=r[i],m[a]&&(a=m[a]),t&&"keypress"!=t&&u[a]&&(a=u[a],n.push("shift")),f(a)&&n.push(a);return{key:a,modifiers:n,action:t=v(a,n,t)}}function g(e){var t=this;if(e=e||n,!(t instanceof g))return new g(e);t.target=e,t._callbacks={},t._directMap={};var r,a={},i=!1,o=!1,s=!1;function c(e){e=e||{};var t,r=!1;for(t in a)e[t]?r=!0:a[t]=0;r||(s=!1)}function l(e,r,i,n,o,s){var c,l,u,m,d=[],h=i.type;if(!t._callbacks[e])return[];for("keyup"==h&&f(e)&&(r=[e]),c=0;c<t._callbacks[e].length;++c)if(l=t._callbacks[e][c],(n||!l.seq||a[l.seq]==l.level)&&h==l.action&&("keypress"==h&&!i.metaKey&&!i.ctrlKey||(u=r,m=l.modifiers,u.sort().join(",")===m.sort().join(",")))){var p=!n&&l.combo==o,v=n&&l.seq==n&&l.level==s;(p||v)&&t._callbacks[e].splice(c,1),d.push(l)}return d}function u(e,r,a,i){t.stopCallback(r,r.target||r.srcElement,a,i)||!1===e(r,a)&&(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}(r),function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}(r))}function m(e){"number"!=typeof e.which&&(e.which=e.keyCode);var r=p(e);r&&("keyup"!=e.type||i!==r?t.handleKey(r,function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}(e),e):i=!1)}function d(e,t,n,o){function l(t){return function(){s=t,++a[e],clearTimeout(r),r=setTimeout(c,1e3)}}function m(t){u(n,t,e),"keyup"!==o&&(i=p(t)),setTimeout(c,10)}a[e]=0;for(var d=0;d<t.length;++d){var h=d+1===t.length?m:l(o||S(t[d+1]).action);v(t[d],h,o,e,d)}}function v(e,r,a,i,n){t._directMap[e+":"+a]=r;var o,s=(e=e.replace(/\s+/g," ")).split(" ");s.length>1?d(e,s,r,a):(o=S(e,a),t._callbacks[o.key]=t._callbacks[o.key]||[],l(o.key,o.modifiers,{type:o.action},i,e,n),t._callbacks[o.key][i?"unshift":"push"]({callback:r,modifiers:o.modifiers,action:o.action,seq:i,level:n,combo:e}))}t._handleKey=function(e,t,r){var a,i=l(e,t,r),n={},m=0,d=!1;for(a=0;a<i.length;++a)i[a].seq&&(m=Math.max(m,i[a].level));for(a=0;a<i.length;++a)if(i[a].seq){if(i[a].level!=m)continue;d=!0,n[i[a].seq]=1,u(i[a].callback,r,i[a].combo,i[a].seq)}else d||u(i[a].callback,r,i[a].combo);var h="keypress"==r.type&&o;r.type!=s||f(e)||h||c(n),o=d&&"keydown"==r.type},t._bindMultiple=function(e,t,r){for(var a=0;a<e.length;++a)v(e[a],t,r)},h(e,"keypress",m),h(e,"keydown",m),h(e,"keyup",m)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},,,function(e,t,r){"use strict";r.r(t);var a=r(0),i=r.n(a),n=r(7),o=r.n(n),s=r(2),c=r(1),l=r(8);class u{constructor(){this.roomType="",this.roomName="",this.isAppReady=!1,this.isSettingOpen=!0,this.isInviteOpen=!1,this.isChatOpen=!1,this.isChatSending=!1,this.isRoomJoin=!1,this.isScreenSharing=!1,this.isScreenShareIntroOpen=!1,this.isFirefoxAndScreenShareTriggerNeeded=!1,this.isScreenShareTriggerOpen=!1,this.isUserError=!1,this.isAppError=!1}get confUrl(){const e=`#!/${this.roomType}/${this.roomName}`;return`${location.origin}${location.pathname}${e}`}get isError(){return this.isUserError||this.isAppError}setRoom({roomType:e,roomName:t,isFirefoxAndScreenShareTriggerNeeded:r}){l.a.isValidRoomName(t)&&l.a.isValidRoomType(e)?(this.roomType=e,this.roomName=t,this.isFirefoxAndScreenShareTriggerNeeded=r):this.isUserError=!0}handleGetUserMediaError(e){switch(e.name){case"OverconstrainedError":case"NotFoundError":this.isAppError=!0;break;default:this.isUserError=!0}console.error(e)}handleAppError(e){this.isAppError=!0,console.error(e)}handleUserError(e){this.isUserError=!0,console.error(e)}}Object(c.h)(u,{roomType:c.m,roomName:c.m,isAppReady:c.m,isSettingOpen:c.m,isInviteOpen:c.m,isChatOpen:c.m,isChatSending:c.m,isRoomJoin:c.m,isScreenSharing:c.m,isScreenShareIntroOpen:c.m,isFirefoxAndScreenShareTriggerNeeded:c.m,isScreenShareTriggerOpen:c.m,isUserError:c.m,isAppError:c.m,confUrl:c.e,isError:c.e});var m=u;class d{constructor(){this.peerId="YOUR_PEER_ID",this.dispName="YOUR_NAME",this.isVideoMuted=!1,this.isAudioMuted=!0,this.isSpeaking=!1,this.videoDeviceId="default",this.audioDeviceId="default",this.videoDevices=[],this.audioDevices=[]}get syncState(){return{peerId:this.peerId,dispName:this.dispName,isVideoMuted:this.isVideoMuted,isAudioMuted:this.isAudioMuted,isSpeaking:this.isSpeaking}}get isNoVideoDevices(){return 0===this.videoDevices.length}get isNoAudioDevices(){return 0===this.audioDevices.length}updateDevices({video:e,audio:t}){this.videoDevices=e,this.audioDevices=t,this._setDefaultDeviceIfNeeded()}_setDefaultDeviceIfNeeded(){const e=this.videoDevices.find(e=>e.deviceId===this.videoDeviceId),t=this.audioDevices.find(e=>e.deviceId===this.audioDeviceId);!1===this.isNoVideoDevices&&(e||(this.videoDeviceId=this.videoDevices[0].deviceId)),!1===this.isNoAudioDevices&&(t||(this.audioDeviceId=this.audioDevices[0].deviceId))}}Object(c.h)(d,{peerId:c.m,dispName:c.m,isVideoMuted:c.m,isAudioMuted:c.m,isSpeaking:c.m,videoDeviceId:c.m,audioDeviceId:c.m,videoDevices:c.m.ref,audioDevices:c.m.ref,syncState:c.e,isNoVideoDevices:c.e,isNoAudioDevices:c.e,updateDevices:c.d,_setDefaultDeviceIfNeeded:c.d});var h=d;class p{constructor(){this.syncState=new Map,this.pinnedPeerId="",this.localVideoStreamTrack={},this.localScreenStreamTrack={},this.localAudioStreamTrack={},this.remoteStreams=[]}get localStream(){const e=new MediaStream;return this.localAudioStreamTrack instanceof MediaStreamTrack&&e.addTrack(this.localAudioStreamTrack),this.localScreenStreamTrack instanceof MediaStreamTrack?e.addTrack(this.localScreenStreamTrack):this.localVideoStreamTrack instanceof MediaStreamTrack&&e.addTrack(this.localVideoStreamTrack),e}get pinnedPeerIdDisp(){return 0!==this.pinnedPeerId.length?this.pinnedPeerId:0!==this.remoteStreams.length?this.remoteStreams[0].peerId:""}get pinnedStream(){const e=this.remoteStreams.find(e=>e.peerId===this.pinnedPeerIdDisp);return e||(0!==this.remoteStreams.length?this.remoteStreams[0]:null)}setLocalStream(e){const[t]=e.getVideoTracks(),[r]=e.getAudioTracks();this.localVideoStreamTrack=t,this.localAudioStreamTrack=r}setScreenStreamTrack(e){e instanceof MediaStreamTrack?this.localScreenStreamTrack=e:(this.localScreenStreamTrack.stop(),this.localScreenStreamTrack={})}addRemoteStream(e){const t=this.remoteStreams.find(t=>t.peerId===e.peerId);this.removeRemoteStream(t),this.remoteStreams.push(e)}removeRemoteStreamByPeerId(e){const t=this.remoteStreams.find(t=>t.peerId===e);this.removeRemoteStream(t),this.syncState.delete(e),this.pinnedPeerId===e&&(this.pinnedPeerId="")}removeRemoteStream(e){e&&this.remoteStreams.remove(e)}removeAllRemoteStreams(){this.remoteStreams.forEach(e=>{e.getTracks().forEach(e=>e.stop())}),this.remoteStreams.clear()}}Object(c.h)(p,{syncState:c.m,pinnedPeerId:c.m,localVideoStreamTrack:c.m.ref,localScreenStreamTrack:c.m.ref,localAudioStreamTrack:c.m.ref,remoteStreams:c.m.shallow,localStream:c.e,pinnedPeerIdDisp:c.e,pinnedStream:c.e,setLocalStream:c.d,addRemoteStream:c.d,removeRemoteStreamByPeerId:c.d,removeRemoteStream:c.d});var f=p;class v{constructor(){this.bufferText="",this.lastMessage={},this.messages=[]}addMessage({text:e,timestamp:t,peerId:r},a,i){this.messages.push({id:`${r}-${t}`,text:e,dispDate:new Date(t).toLocaleTimeString().slice(0,5),thumb:a,dispName:i})}updateBuffer(e){this.lastMessage=e,this.bufferText=""}}Object(c.h)(v,{bufferText:c.m,lastMessage:c.m.ref,messages:c.m.shallow,updateBuffer:c.d});var S=v;class g{constructor(){this.items=[]}showStat(e){this._show({type:"stat",text:e},2e3)}showChat(e){this._show({type:"chat",text:`${e.dispName} sent a chat`},3e3)}showJoin(e){this._show({type:"user",text:`${e.dispName} joined`})}showLeave(e){this._show({type:"user",text:`${e.dispName} left`})}_show({type:e,text:t},r=1e3){const a={id:Date.now(),type:e,text:t};this.items.push(a),setTimeout(()=>this.items.remove(a),r)}}Object(c.h)(g,{items:c.m.shallow});var b=g;var y=class{constructor(){this.ui=new m,this.user=new h,this.room=new f,this.chat=new S,this.notification=new b}},E=r(21),w=r.n(E),_=r(14),k=r.n(_),N=r(10),M=r(3),T=r(11),O=r(4);var C=class extends N.a{constructor(e){super(e),this._peer=null,this._destroyVad=null;const{user:t,room:r,ui:a}=this.store;Object(c.n)(()=>[t.videoDeviceId,t.audioDeviceId],async([e,i])=>{const n=await M.a.getUserMedia({videoDeviceId:e,audioDeviceId:i}).catch(e=>a.handleGetUserMediaError(e));a.isError||(r.localStream instanceof MediaStream&&M.a.stopStream(r.localStream),t.isVideoMuted&&M.a.setMuteVideoTracks(n,!0),t.isAudioMuted&&M.a.setMuteAudioTracks(n,!0),r.setLocalStream(n))}),Object(c.n)(()=>t.isVideoMuted,e=>M.a.setMuteVideoTracks(r.localStream,e)),Object(c.n)(()=>t.isAudioMuted,e=>{M.a.setMuteAudioTracks(r.localStream,e);const t=O.a.getAudioCtx(window);"suspended"===t.state&&t.resume()}),Object(c.n)(()=>t.dispName,e=>localStorage.setItem("SkyWayConf.dispName",e)),Object(c.n)(()=>r.localStream,e=>{this._destroyVad&&this._destroyVad();const{destroy:r}=k()(O.a.getAudioCtx(window),e,{onUpdate(e){t.isSpeaking=0!==e}});this._destroyVad=r})}async onLoad({roomType:e,roomName:t,isFirefoxAndScreenShareTriggerNeeded:r}){const{user:a,ui:i,room:n}=this.store;i.setRoom({roomType:e,roomName:t,isFirefoxAndScreenShareTriggerNeeded:r});const o=localStorage.getItem("SkyWayConf.dispName");o&&(a.dispName=o);const s=await M.a.getUserPermission(),c=await M.a.getUserDevices().catch(e=>i.handleUserError(e));if(!i.isError){if(M.a.stopStream(s),a.updateDevices(c),a.isNoVideoDevices&&a.isNoAudioDevices){const e=M.a.getFakeStream(O.a.getAudioCtx(window));n.setLocalStream(e)}i.isAppReady=!0,navigator.mediaDevices.addEventListener("devicechange",async()=>{const e=await M.a.getUserDevices().catch(e=>i.handleUserError(e));i.isError||a.updateDevices(e)}),w.a.bind(["command+e","ctrl+e"],()=>(a.isVideoMuted=!a.isVideoMuted,!1)),w.a.bind(["command+d","ctrl+d"],()=>(a.isAudioMuted=!a.isAudioMuted,!1))}}async onClickJoinRoom(){const{ui:e,room:t,user:r}=this.store;if(this._peer=await T.a.initPeer().catch(t=>e.handleAppError(t)),e.isError)return;this._peer.on("error",t=>e.handleUserError(t)),r.peerId=this._peer.id;const a=this._peer.joinRoom(`${e.roomType}/${e.roomName}`,{mode:e.roomType,stream:t.localStream});this._onRoomJoin(a),e.isSettingOpen=!1}async onChatEnterKeyDown(){const{chat:e,user:t,room:r,ui:a}=this.store;if(a.isChatSending)return;if(0===e.bufferText.length)return;a.isChatSending=!0;const i=await M.a.snapVideoStream(r.localStream,"image/jpeg",.5).catch(e=>a.handleAppError(e));if(a.isError)return;const n={peerId:t.peerId,text:e.bufferText,blob:i,timestamp:Date.now()},o=URL.createObjectURL(i);e.addMessage(n,o,t.dispName),e.updateBuffer(n),a.isChatSending=!1}async startScreenShare(e){const{ui:t,room:r,user:a}=this.store,i=M.a.isGetDisplayMediaAvailable();if(!1===i&&!1===T.a.isScreenShareAvailable())return void(t.isScreenShareIntroOpen=!0);let n;try{n=i?await M.a.getDisplayStreamTrack():await T.a.getScreenStreamTrack({mediaSource:e})}catch(e){return e instanceof DOMException==0&&(t.isScreenShareIntroOpen=!0),void console.error(e)}n.addEventListener("ended",()=>this.stopScreenShare(),{once:!0}),a.isVideoMuted&&M.a.setMuteTrack(n,!0),r.setScreenStreamTrack(n),t.isScreenSharing=!0,t.isScreenShareTriggerOpen=!1}stopScreenShare(){const{ui:e,room:t}=this.store;t.setScreenStreamTrack(null),e.isScreenSharing=!1}_onRoomJoin(e){const{ui:t,user:r,room:a,chat:i}=this.store;t.isRoomJoin=!0;const n=[];n.push(Object(c.n)(()=>a.localStream,t=>e.replaceStream(t)),Object(c.n)(()=>r.syncState,t=>e.send({type:"sync",payload:t})),Object(c.n)(()=>i.lastMessage,t=>e.send({type:"chat",payload:t}))),e.on("stream",t=>this._onRoomAddStream(t,e)),e.on("peerLeave",e=>this._onRoomPeerLeave(e)),e.on("data",e=>this._onRoomData(e)),e.on("close",()=>this._onRoomClose(e,n))}_onRoomAddStream(e,t){const{room:r,user:a,notification:i}=this.store;r.addRemoteStream(e),t.send({type:"sync",payload:a.syncState}),Object(c.q)(()=>void 0!==r.syncState.get(e.peerId),()=>i.showJoin(r.syncState.get(e.peerId)))}_onRoomPeerLeave(e){const{room:t,notification:r}=this.store,a=t.syncState.get(e);r.showLeave(a),t.removeRemoteStreamByPeerId(e)}_onRoomData({_src:e,data:t}){const{room:r,chat:a,ui:i,notification:n}=this.store,{type:o,payload:s}=t;switch(o){case"sync":r.syncState.set(s.peerId,s);break;case"chat":{const e=r.syncState.get(s.peerId),t=new Blob([new Uint8Array(s.blob)]),o=URL.createObjectURL(t);a.addMessage(s,o,e.dispName),i.isChatOpen||n.showChat(e);break}default:throw new Error(`${o} is not defined as message type`)}}_onRoomClose(e,t){const{room:r,ui:a,notification:i}=this.store;i.showStat("Your connection closed, trying to reconnect..."),e.removeAllListeners(),t.forEach(e=>e()),r.removeAllRemoteStreams();const n=this._peer.joinRoom(`${a.roomType}/${a.roomName}`,{mode:a.roomType,stream:r.localStream});this._onRoomJoin(n)}};var x=()=>i.a.createElement("div",{className:"Loader"},i.a.createElement("img",{className:"Loader_Image",src:"./images/conf/icon-loading.svg",alt:"Loading"}));var I=Object(s.c)(({ui:e})=>i.a.createElement("div",{className:"Error"},i.a.createElement("div",{className:"Error_Title"},i.a.createElement("i",{className:"material-icons"},"error"),i.a.createElement("span",null,"Error")),e.isUserError&&i.a.createElement("div",{className:"Error_Desc"},i.a.createElement("p",null,"Please check your.."),i.a.createElement("ul",null,i.a.createElement("li",null,"current url(and hash)"),i.a.createElement("li",null,"camera or microphone settings"),i.a.createElement("li",null,"network conditions"),i.a.createElement("li",null,"browser updates"))),e.isAppError&&i.a.createElement("div",{className:"Error_Desc"},i.a.createElement("p",null,"Sorry, currently our service is not available. Please try it later."))));var D=Object(s.b)("ui","action")(Object(s.c)(class extends i.a.Component{render(){const{ui:e,children:t}=this.props;return e.isError?i.a.createElement(I,{ui:e}):e.isAppReady?t:i.a.createElement(x,null)}componentDidCatch(e){this.props.action.$update("ui.isAppError",!0),console.error(e)}}));var L=Object(s.c)(class extends i.a.Component{constructor(){super(),this._ref=null}render(){const{muted:e,isMirror:t,stream:r}=this.props;return i.a.createElement("video",{className:`Video ${t?"-reverse":""}`,ref:e=>{this._ref=e},muted:e,autoPlay:!0})}componentDidMount(){this._ref&&this.props.stream instanceof MediaStream&&(this._ref.srcObject=this.props.stream)}componentWillReact(){this._ref&&this.props.stream instanceof MediaStream&&(this._ref.srcObject=this.props.stream)}});var A=Object(s.c)(({room:e})=>i.a.createElement("div",{className:"ScreenVideo"},e.pinnedStream?i.a.createElement(L,{stream:e.pinnedStream,muted:!0}):null));var j=Object(s.b)("room")(Object(s.c)(({room:e})=>i.a.createElement(A,{room:e})));var V=class extends i.a.Component{constructor(){super(),this._ref=null,this._disposer=null,this._checkListWidth=this._checkListWidth.bind(this)}render(){return i.a.createElement("div",{className:"MemberListScroller"},i.a.createElement("div",{className:"MemberListScroller_Arrow -left"},i.a.createElement("i",{className:"material-icons"},"chevron_left")),i.a.createElement("div",{ref:e=>this._ref=e,className:"MemberListScroller_Content"},this.props.children),i.a.createElement("div",{className:"MemberListScroller_Arrow -right"},i.a.createElement("i",{className:"material-icons"},"chevron_right")))}componentDidMount(){const{room:e}=this.props;this._disposer=Object(c.n)(()=>e.remoteStreams.length,()=>this._checkListWidth(),{fireImmediately:!0,delay:500}),window.addEventListener("resize",this._checkListWidth)}componentWillUnmount(){this._disposer(),window.removeEventListener("resize",this._checkListWidth)}_checkListWidth(){parseInt(getComputedStyle(this._ref).width)<Array.from(this._ref.children).reduce((e,t)=>e+parseInt(getComputedStyle(t).width),0)?this._ref.parentElement.classList.add("-scrollable"):this._ref.parentElement.classList.remove("-scrollable")}},P=r(5),R=r(6);var $=Object(s.c)(({ui:e,room:t,user:r,action:a})=>i.a.createElement("div",{className:"MemberVideo"},i.a.createElement("div",{className:"MemberVideo_Name"},r.dispName),i.a.createElement("div",{className:"MemberVideo_Control"},i.a.createElement("button",{onClick:()=>a.$update("user.isAudioMuted",!r.isAudioMuted),title:r.isAudioMuted?"Unmute":"Mute"},i.a.createElement(R.a,{isMuted:r.isAudioMuted,isSelf:!0})),i.a.createElement("button",{onClick:()=>a.$update("user.isVideoMuted",!r.isVideoMuted),title:r.isVideoMuted?"Unmute":"Mute"},i.a.createElement(P.a,{isMuted:r.isVideoMuted,isSelf:!0}))),i.a.createElement("div",{className:"MemberVideo_Settings"},i.a.createElement("button",{onClick:()=>a.$update("ui.isSettingOpen",!0),title:"Open settings"},i.a.createElement("i",{className:"material-icons"},"settings"))),i.a.createElement(L,{stream:t.localStream,muted:!0,isMirror:!1===e.isScreenSharing}))),U=r(9);var F=Object(s.c)(({room:e,action:t})=>i.a.createElement(i.a.Fragment,null,e.remoteStreams.map(r=>{const a=e.syncState.get(r.peerId);return i.a.createElement("div",{key:r.id,className:"MemberVideo",onClick:()=>t.$update("room.pinnedPeerId",r.peerId)},e.pinnedPeerIdDisp===r.peerId&&i.a.createElement("div",{className:"MemberVideo_Pinned"}),a?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"MemberVideo_Name"},a.dispName),i.a.createElement("div",{className:"MemberVideo_Media"},a.isSpeaking&&i.a.createElement(U.a,{isSpeaking:!0}),a.isAudioMuted&&i.a.createElement(R.a,{isMuted:!0}),a.isVideoMuted&&i.a.createElement(P.a,{isMuted:!0}))):null,i.a.createElement(L,{stream:r}))})));var q=Object(s.c)(({action:e})=>i.a.createElement("div",{className:"MemberVideo"},i.a.createElement("a",{className:"MemberVideo_Invite",onClick:()=>e.$update("ui.isInviteOpen",!0)},i.a.createElement("i",{className:"material-icons -x15"},"person_add"))));var B=Object(s.b)("ui","room","user","action")(Object(s.c)(({ui:e,room:t,user:r,action:a})=>i.a.createElement("div",{className:"L-MemberList"},i.a.createElement($,{ui:e,room:t,user:r,action:a}),i.a.createElement(V,{room:t},i.a.createElement(F,{room:t,action:a}),i.a.createElement(q,{action:a})))));var W=Object(s.c)(({isVisible:e,children:t})=>e?i.a.createElement("div",{className:"Popup"},t):null);var K=Object(s.c)(({ui:e,room:t})=>i.a.createElement(L,{stream:t.localStream,muted:!0,isMirror:!1===e.isScreenSharing}));var J=Object(s.c)(({ui:e,user:t,action:r})=>i.a.createElement("div",{className:"DeviceSelector"},i.a.createElement("div",{className:"DeviceSelector_Row"},i.a.createElement("div",{className:"DeviceSelector_Label"},"Cam"),i.a.createElement("select",{className:"DeviceSelector_Select",value:t.videoDeviceId,onChange:e=>r.$update("user.videoDeviceId",e.target.value),disabled:e.isScreenSharing||t.isNoVideoDevices},t.isNoVideoDevices&&i.a.createElement("option",{value:""},"Cam not found"),t.videoDevices.map((e,t)=>i.a.createElement("option",{key:e.deviceId,value:e.deviceId},e.label||`Cam ${t+1}`))),i.a.createElement("button",{onClick:()=>r.$update("user.isVideoMuted",!t.isVideoMuted),title:t.isVideoMuted?"Unmute":"Mute"},i.a.createElement(P.a,{isMuted:t.isVideoMuted,isSelf:!0}))),i.a.createElement("div",{className:"DeviceSelector_Row"},i.a.createElement("div",{className:"DeviceSelector_Label"},"Mic"),i.a.createElement("select",{className:"DeviceSelector_Select",value:t.audioDeviceId,onChange:e=>r.$update("user.audioDeviceId",e.target.value),disabled:e.isScreenSharing||t.isNoAudioDevices},t.isNoAudioDevices&&i.a.createElement("option",{value:""},"Mic not found"),t.audioDevices.map((e,t)=>i.a.createElement("option",{key:e.deviceId,value:e.deviceId},e.label||`Mic ${t+1}`))),i.a.createElement("button",{onClick:()=>r.$update("user.isAudioMuted",!t.isAudioMuted),title:t.isAudioMuted?"Unmute":"Mute"},i.a.createElement(R.a,{isMuted:t.isAudioMuted,isSelf:!0})),i.a.createElement("div",{className:"DeviceSelector_Va"},i.a.createElement(U.a,{isSpeaking:t.isSpeaking}))),e.isScreenSharing&&i.a.createElement("p",{className:"DeviceSelector_Notice"},"You can not change devices during screen sharing.")));var z=Object(s.c)(({user:e,action:t})=>i.a.createElement("div",{className:"NameEdit"},i.a.createElement("div",{className:"NameEdit_Label"},"Name"),i.a.createElement("input",{className:"NameEdit_Input",type:"text",value:e.dispName,onChange:e=>{const{value:r}=e.target;r.length<=10&&t.$update("user.dispName",r)}})));var H=Object(s.b)("room","ui","user","action")(Object(s.c)(({room:e,ui:t,user:r,action:a})=>i.a.createElement(W,{isVisible:t.isSettingOpen},i.a.createElement("div",{className:"L-Setting"},i.a.createElement("div",{className:"L-Setting_Video"},i.a.createElement(K,{ui:t,room:e})),i.a.createElement(J,{ui:t,user:r,action:a}),i.a.createElement(z,{user:r,action:a}),i.a.createElement("div",{className:"L-Setting_Finish"},i.a.createElement("button",{onClick:e=>{t.isRoomJoin?a.$update("ui.isSettingOpen",!1):(e.target.disabled=!0)&&a.onClickJoinRoom()}},t.isRoomJoin?"Close":"OK"))))));var G=Object(s.b)("ui","action")(Object(s.c)(({ui:e,action:t})=>i.a.createElement(W,{isVisible:e.isInviteOpen},i.a.createElement("div",{className:"L-Invite"},i.a.createElement("h3",{className:"L-Invite_Title"},"Share the link"),i.a.createElement("input",{type:"text",className:"L-Invite_Input",readOnly:!0,defaultValue:e.confUrl,onClick:e=>e.target.select(0,-1)}),i.a.createElement("div",{className:"L-Invite_Finish"},i.a.createElement("button",{onClick:()=>t.$update("ui.isInviteOpen",!1)},"Close"))))));var Y=Object(s.b)("ui","action")(Object(s.c)(({ui:e,action:t})=>!e.isChatOpen&&i.a.createElement("button",{onClick:()=>t.$update("ui.isChatOpen",!0),title:"Open chat"},i.a.createElement("i",{className:"material-icons"},"chat"))));var X=Object(s.c)(class extends i.a.Component{constructor(){super(),this._ref=null}render(){const{chat:e}=this.props;return i.a.createElement("ul",{className:"ChatMessageList",ref:e=>this._ref=e},e.messages.map(e=>i.a.createElement("li",{key:e.id},i.a.createElement("div",{className:"ChatMessageList_Item"},i.a.createElement("div",{className:"ChatMessageList_Item_Thumb"},i.a.createElement("img",{className:"ChatMessageList_Item_Thumb_Image",src:e.thumb})),i.a.createElement("div",{className:"ChatMessageList_Item_Content"},i.a.createElement("div",{className:"ChatMessageList_Item_Content_Head"},i.a.createElement("span",{className:"ChatMessageList_Item_Content_HeadName"},e.dispName),i.a.createElement("span",{className:"ChatMessageList_Item_Content_HeadDate"},"at ",e.dispDate)),i.a.createElement("p",{className:"ChatMessageList_Item_Content_Body"},e.text))))))}componentWillReact(){this._ref&&requestAnimationFrame(()=>this._ref.scrollTop=this._ref.scrollHeight)}});var Q=Object(s.c)(({chat:e,action:t})=>i.a.createElement("div",{className:"ChatBox"},i.a.createElement("a",{className:"ChatBox_Closer",onClick:()=>t.$update("ui.isChatOpen",!1)},i.a.createElement("i",{className:"material-icons -x05"},"keyboard_arrow_right")),i.a.createElement(X,{chat:e}),i.a.createElement("input",{className:"ChatBox_Input",type:"text",placeholder:"Type messages here...",value:e.bufferText,onChange:e=>t.$update("chat.bufferText",e.target.value),onKeyDown:e=>13===e.keyCode&&t.onChatEnterKeyDown()})));var Z=Object(s.b)("ui","chat","action")(Object(s.c)(({ui:e,chat:t,action:r})=>i.a.createElement("div",{className:"L-ChatBox"},e.isChatOpen&&i.a.createElement(Q,{ui:e,chat:t,action:r}))));var ee=Object(s.c)(({ui:e,action:t})=>e.isFirefoxAndScreenShareTriggerNeeded?i.a.createElement(i.a.Fragment,null,i.a.createElement("button",{onClick:()=>t.$update("ui.isScreenShareTriggerOpen",!e.isScreenShareTriggerOpen),title:"Choose screen share media source"},i.a.createElement("i",{className:"material-icons"},"screen_share")),e.isScreenShareTriggerOpen&&i.a.createElement("div",{className:"ScreenShareTrigger_Items"},i.a.createElement("p",{className:"ScreenShareTrigger_Items_Desc"},"Share your..."),["window","screen","application"].map(e=>i.a.createElement("button",{key:e,onClick:()=>t.startScreenShare(e),title:`Share ${e}`},e)))):i.a.createElement("button",{onClick:()=>t.startScreenShare(),title:"Start screen share"},i.a.createElement("i",{className:"material-icons"},"screen_share")));var te=Object(s.b)("ui","action")(Object(s.c)(({ui:e,action:t})=>e.isScreenSharing?i.a.createElement("button",{onClick:()=>t.stopScreenShare(),title:"Stop screen share"},i.a.createElement("i",{className:"material-icons"},"stop_screen_share")):i.a.createElement(ee,{ui:e,action:t})));var re=Object(s.b)("ui","action")(Object(s.c)(({ui:e,action:t})=>i.a.createElement(W,{isVisible:e.isScreenShareIntroOpen},i.a.createElement("div",{className:"L-ScreenShareIntro"},i.a.createElement("h3",{className:"L-ScreenShareIntro_Title"},"ScreenShare is not available"),i.a.createElement("p",{className:"L-ScreenShareIntro_Desc"},"Screen share is not supported on your browser. If you are using Chrome, please install"," ",i.a.createElement("a",{href:"https://chrome.google.com/webstore/detail/conf3-screenshare/ooeacgahemnciocfilnkchjjiakipakp",target:"_blank",rel:"noopener noreferrer"},"Chrome extension"),"."),i.a.createElement("p",{className:"L-ScreenShareIntro_Desc"},"Or, try latest browser releases like Chrome Canary, Safari TP may support screen share."),i.a.createElement("div",{className:"L-ScreenShareIntro_Finish"},i.a.createElement("button",{onClick:()=>t.$update("ui.isScreenShareIntroOpen",!1)},"Close"))))));var ae=Object(s.c)(({notification:e})=>i.a.createElement(i.a.Fragment,null,e.items.map(e=>i.a.createElement("div",{className:`Toast -${e.type}`,key:e.id},i.a.createElement("span",{className:"Toast_Text"},e.text)))));var ie=Object(s.b)("notification")(Object(s.c)(({notification:e})=>i.a.createElement("div",{className:"L-Notification"},i.a.createElement(ae,{notification:e}))));var ne=()=>i.a.createElement(D,null,i.a.createElement("main",{className:"L-Main"},i.a.createElement(j,null),i.a.createElement(B,null)),i.a.createElement(H,null),i.a.createElement(G,null),i.a.createElement("div",{className:"L-RightSide"},i.a.createElement(te,null),i.a.createElement(Y,null)),i.a.createElement(Z,null),i.a.createElement(re,null),i.a.createElement(ie,null));function oe(){return(oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}!function(){const[,e,t]=location.hash.split("/"),{userAgent:r}=navigator,a=O.a.getOsName(r),n=O.a.getBrowserName(r);if(!1===(["Windows","Mac","Linux","iOS","Android"].includes(a)&&["Chrome","Firefox","Safari"].includes(n)))return void(location.href="./not_supported.html");if(["iOS","Android"].includes(a))return void(location.href=`./conf_mobile.html${location.hash}`);const c=new y,l=new C(c),u="Firefox"===n&&!1===M.a.isGetDisplayMediaAvailable();l.onLoad({roomType:e,roomName:t,isFirefoxAndScreenShareTriggerNeeded:u}),o.a.render(i.a.createElement(s.a,oe({action:l},c),i.a.createElement(ne,null)),document.getElementById("app-root")),window.addEventListener("hashchange",()=>location.reload(!0))}()}]);